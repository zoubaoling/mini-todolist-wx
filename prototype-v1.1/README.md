# 智能待办清单小程序 - 原型 v1.1

## 🆕 版本更新说明

### 新增功能
- ✅ **微信登录系统**：用户需要通过微信账号登录才能使用应用
- ✅ **用户数据隔离**：每个用户只能查看和管理自己的任务数据
- ✅ **登录状态管理**：自动检查登录状态，未登录时显示登录提示
- ✅ **退出登录功能**：用户可以安全退出登录

## 🔐 登录流程设计

### 1. 登录前状态
- **访问任何页面**：自动跳转到登录页面
- **登录页面**：展示应用介绍和微信登录按钮
- **登录过程**：显示加载动画，模拟微信授权流程

### 2. 登录后状态
- **首页**：显示用户头像、昵称和个性化数据
- **所有功能**：正常使用，数据与用户账号关联
- **个人中心**：显示用户统计数据和设置选项

### 3. 退出登录流程
- **退出确认**：弹出确认对话框
- **数据清理**：清除本地存储的用户信息
- **页面跳转**：自动跳转到登录页面

## 📱 页面功能说明

### 登录页面 (login.html)
- **功能**：微信账号登录入口
- **特色**：
  - 应用介绍和功能展示
  - 微信登录按钮
  - 隐私说明
  - 登录加载动画

### 首页 (index.html)
- **功能**：任务列表和概览
- **登录状态**：
  - 显示用户头像和昵称
  - 显示退出登录按钮
  - 未登录时显示登录提示弹窗

### 添加任务 (add-task.html)
- **功能**：创建新任务
- **登录检查**：未登录时显示登录提示，无法创建任务

### 统计中心 (statistics.html)
- **功能**：数据统计和分析
- **登录检查**：未登录时显示登录提示，无法查看统计数据

### 个人中心 (user-center.html)
- **功能**：用户信息和设置
- **登录状态**：
  - 显示用户详细信息
  - 提供退出登录功能
  - 未登录时显示登录提示

### 任务详情 (task-detail.html)
- **功能**：查看和编辑任务详情
- **登录检查**：未登录时显示登录提示

## 🔄 交互流程

### 登录流程
```
用户访问应用 → 检查登录状态 → 未登录 → 跳转登录页 → 微信登录 → 登录成功 → 跳转首页
```

### 退出流程
```
用户点击退出 → 确认对话框 → 确认退出 → 清除数据 → 跳转登录页
```

### 功能访问流程
```
用户访问功能页面 → 检查登录状态 → 已登录 → 正常使用功能
                                → 未登录 → 显示登录提示 → 跳转登录页
```

## 🛠️ 技术实现

### 登录状态管理
- 使用 `localStorage` 存储登录状态
- 存储用户信息（昵称、头像、ID等）
- 页面加载时自动检查登录状态

### 登录检查机制
- 每个页面都有登录状态检查函数
- 未登录时显示统一的登录提示弹窗
- 提供"去登录"和"取消"两个选项

### 数据隔离
- 用户数据与微信账号关联
- 不同用户看到不同的任务数据
- 退出登录后数据自动清除

## 🎨 设计特色

### 登录页面设计
- **渐变背景**：美观的紫色渐变背景
- **应用图标**：展示应用品牌形象
- **功能介绍**：清晰展示应用价值
- **微信登录**：符合微信生态的登录方式

### 登录状态展示
- **用户头像**：显示在页面头部
- **用户昵称**：个性化显示
- **退出按钮**：便捷的退出入口

### 登录提示设计
- **模态弹窗**：不干扰用户操作
- **友好提示**：清晰的说明文字
- **操作按钮**：明确的行动指引

## 📋 使用说明

### 首次使用
1. 打开应用，自动跳转到登录页面
2. 点击"微信快速登录"按钮
3. 完成微信授权登录
4. 登录成功后自动跳转到首页

### 日常使用
1. 打开应用，自动检查登录状态
2. 已登录用户直接进入首页
3. 可以正常使用所有功能

### 退出登录
1. 在首页或个人中心点击"退出"按钮
2. 确认退出操作
3. 自动跳转到登录页面

## 🔒 隐私保护

### 数据安全
- 仅获取必要的微信用户信息
- 用户数据本地存储，不上传服务器
- 退出登录时自动清除本地数据

### 权限说明
- 仅获取微信昵称和头像
- 不获取其他敏感信息
- 数据仅用于个性化体验

## 🚀 后续规划

### 云开发集成
- 将用户数据同步到云端
- 实现多设备数据同步
- 添加数据备份功能

### 功能增强
- 添加用户偏好设置
- 实现数据导出功能
- 增加社交分享功能

---

**版本**：v1.1  
**更新日期**：2024年1月  
**主要更新**：添加微信登录系统
